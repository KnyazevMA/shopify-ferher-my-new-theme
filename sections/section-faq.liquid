{%- liquid
  assign align_header = ''
  assign align_item = ''
  assign padding_classes = ''

  if section.settings.content_alignment == 'left'
    assign align_header = 'tw:text-left tw:items-start'
    assign align_item = 'tw:ml-0 tw:mr-auto'
  elsif section.settings.content_alignment == 'center'
    assign align_header = 'tw:text-center tw:items-center'
    assign align_item = 'tw:mx-auto'
  elsif section.settings.content_alignment == 'right'
    assign align_header = 'tw:text-right tw:items-end'
    assign align_item = 'tw:ml-auto tw:mr-0'
  endif

  if section.settings.padding_size == 'none'
    assign padding_classes = 'tw:py-0'
  elsif section.settings.padding_size == 'small'
    assign padding_classes = 'tw:py-10'
  elsif section.settings.padding_size == 'medium'
    assign padding_classes = 'tw:py-16'
  elsif section.settings.padding_size == 'large'
    assign padding_classes = 'tw:py-24'
  endif
-%}

<faq-component
  class="faq tw:py-20 tw:mb-20 tw:bg-gray-500 tw:md:py-15 tw:md:mb-15"
  id="faq-{{ section.id }}"
>
  <div class="faq__wrapper tw:flex tw:flex-col tw:items-center {{ align_header }} {{ padding_classes }}">
    {% if section.settings.heading != blank %}
      <h2 class="faq__title tw:text-3xl tw:font-semibold tw:mb-4 tw:md:text-2xl">{{ section.settings.heading }}</h2>
    {% endif %}
    {% if section.settings.subheading != blank %}
      <p class="faq__description tw:text-base tw:text-gray-500 tw:mb-12 tw:md:mb-8">
        {{ section.settings.subheading }}
      </p>
    {% endif %}

    <ul class="dropdown-list tw:p-0 tw:m-0 tw:list-none tw:flex tw:flex-col tw:gap-2 tw:mx-auto tw:w-full">
      {% for block in section.blocks %}
        <li class="dropdown-list__item tw:bg-white tw:border tw:border-gray-200 tw:p-6 tw:pr-10 tw:max-w-4xl tw:w-full {{ align_item }}">
          <h3 class="dropdown-list__title">
            <button
              class="
                dropdown-list__btn
                tw:flex tw:justify-between tw:items-center tw:gap-2.5
                tw:w-full tw:bg-transparent
                tw:border-none tw:cursor-pointer tw:m-0 tw:p-0
                tw:transition-all tw:duration-300
                tw:hover:text-gray-500 tw:focus-visible:text-gray-500
              "
              type="button"
              aria-label="Toggle answer"
            >
              <span class="dropdown-list__text tw:max-w-[500px] tw:text-base tw:leading-normal">
                {{- block.settings.question -}}
              </span>
              <span
                class="
                  dropdown-list__icon tw:block
                  tw:relative tw:w-5 tw:h-5
                  tw:border tw:border-black tw:rounded-full
                  tw:shrink-0
                "
              ></span>
            </button>
          </h3>
          <p
            class="
              dropdown-list__content
              tw:text-base tw:text-gray-500 tw:m-0 tw:max-h-0 tw:opacity-0 tw:pointer-events-none
              tw:transition-all tw:duration-300 tw:origin-top
            "
          >
            {{ block.settings.answer }}
          </p>
        </li>
      {% endfor %}
    </ul>
  </div>
</faq-component>

{%- style -%}
  faq__wrapper--{{ section.settings.content_alignment }} spacing--{{ section.settings.padding_size }}
{%- endstyle -%}

{% schema %}
{
  "name": "FAQ",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Title",
      "default": "Frequently asked questions"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Description",
      "default": "Answers to frequently asked questions ."
    },
    {
      "type": "select",
      "id": "content_alignment",
      "label": "Aligning content",
      "default": "center",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ]
    },
    {
      "type": "select",
      "id": "padding_size",
      "label": "Section indents",
      "options": [
        { "value": "none", "label": "Without indents" },
        { "value": "small", "label": "Small" },
        { "value": "medium", "label": "Average" },
        { "value": "large", "label": "Large" }
      ],
      "default": "medium"
    }
  ],
  "blocks": [
    {
      "type": "faq_item",
      "name": "FAQ Item",
      "settings": [
        {
          "type": "text",
          "id": "question",
          "label": "Question",
          "default": "Your question here"
        },
        {
          "type": "textarea",
          "id": "answer",
          "label": "Answer",
          "default": "Your answer here"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "FAQ",
      "category": "Custom sections"
    }
  ]
}
{% endschema %}
